<!DOCTYPE html>
<html>
<head>
    <title>My tinyurl site</title>
</head>
<body>
<h1> Tiny URL </h1>
<div>
    <form action="shorten" method="post">
    {% csrf_token %}
    <div class="col-sm-9">
        <input type="text" name="url" id="url" class="form-control input-sm" placeholder="http://www.facebook.com" />
    </div>

    <div class="col-sm-3">
        <button id="submitButton" class="btn btn-primary">Submit</button></p>
    </div>
    <div class="panel-footer"><span id="url-result">Enter the URL above and click submit!</span></div>
    </form>
</div>
<script src="http://apps.bdimg.com/libs/jquery/1.11.1/jquery.min.js">
</script>
<script>
$.ajaxSetup({
        data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
});
</script>
<script>
    $(document).ready(function(){
        $("#submitButton").click(function(){
            $.ajax({
                type: "POST",
                url: "shorten",
                data: {'url' : $('#url').val()},
                success: returnSuccess,
                dataType: 'json'
            });
        });
    });
    function returnSuccess(data, textStatus, jqXHR) {
        if(data.url) {
            $('#url-result').text(data.url);
            $('#url').val("");
        } else {
            $('#url-result').text("Do not submit blank."); 
        }
    }
</script>
</body>
</html>
